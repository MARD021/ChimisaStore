<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AnimeFC - Tu portal de anime y películas</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.5/dist/cdn.min.js" defer></script>
  <style id="app-style">
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    
    body {
      font-family: 'Poppins', sans-serif;
      transition: background-color 0.3s, color 0.3s;
    }
    
    .dark {
      --bg-primary: #121212;
      --bg-secondary: #1e1e1e;
      --text-primary: #ffffff;
      --text-secondary: #b3b3b3;
      --accent-color: #8257e6;
    }
    
    .light {
      --bg-primary: #ffffff;
      --bg-secondary: #f5f5f5;
      --text-primary: #121212;
      --text-secondary: #505050;
      --accent-color: #6c47d1;
    }
    
    .anime-card {
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .anime-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }
    .carousel { scroll-behavior: smooth; scrollbar-width: none; }
    .carousel::-webkit-scrollbar { display: none; }
    .banner-overlay {
      background: linear-gradient(0deg, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0.4) 50%, rgba(0, 0, 0, 0.1) 100%);
    }
    .loading-spinner { border-top-color: var(--accent-color); animation: spinner 0.8s linear infinite; }
    @keyframes spinner { 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }
    .toggle-checkbox:checked { right: 0; border-color: var(--accent-color); }
    .toggle-checkbox:checked + .toggle-label { background-color: var(--accent-color); }
    .shimmer {
      background: linear-gradient(90deg, var(--bg-secondary) 0%, rgba(255,255,255,0.1) 50%, var(--bg-secondary) 100%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
    }
    @keyframes shimmer { 0%{background-position:-200% 0} 100%{background-position:200% 0} }
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: var(--bg-secondary); }
    ::-webkit-scrollbar-thumb { background: var(--accent-color); border-radius: 10px; }
  </style>
</head>
<body
  x-data="app()"
  x-init="init()"
  :class="darkMode ? 'dark bg-[--bg-primary] text-[--text-primary]' : 'light bg-[--bg-primary] text-[--text-primary]'"
>
  <!-- Loading Screen -->
  <div x-show="isLoading" class="fixed inset-0 flex items-center justify-center z-50 bg-[--bg-primary]">
    <div class="loading-spinner w-16 h-16 border-4 border-[--bg-secondary] border-solid rounded-full"></div>
  </div>

  <!-- Login Modal -->
  <div x-show="showLogin" x-cloak 
       class="fixed inset-0 flex items-center justify-center z-50 bg-black/70 backdrop-blur-sm"
       @click.self="showLogin = false">
    <div class="bg-[--bg-secondary] p-8 rounded-xl max-w-md w-full shadow-2xl" 
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 transform scale-95"
         x-transition:enter-end="opacity-100 transform scale-100"
         x-transition:leave="transition ease-in duration-300"
         x-transition:leave-start="opacity-100 transform scale-100"
         x-transition:leave-end="opacity-0 transform scale-95">
      <h2 class="text-2xl font-bold text-center mb-8">Iniciar Sesión en AnimeFlix</h2>
      
      <button @click="login('google')" class="flex items-center justify-center w-full bg-white text-gray-800 py-3 rounded-lg mb-4 hover:shadow-md transition">
        <i class="fab fa-google mr-2"></i> Continuar con Google
      </button>
      
      <button @click="login('facebook')" class="flex items-center justify-center w-full bg-blue-600 text-white py-3 rounded-lg mb-8 hover:bg-blue-700 transition">
        <i class="fab fa-facebook-f mr-2"></i> Continuar con Facebook
      </button>
      
      <p class="text-sm text-[--text-secondary] text-center">
        Al iniciar sesión, aceptas nuestros <a href="javascript:void(0)" class="text-[--accent-color] hover:underline">Términos de servicio</a> y 
        <a href="javascript:void(0)" class="text-[--accent-color] hover:underline">Política de privacidad</a>.
      </p>
      
      <button @click="showLogin = false" class="absolute top-4 right-4 text-[--text-secondary] hover:text-[--text-primary]">
        <i class="fas fa-times text-xl"></i>
      </button>
    </div>
  </div>

  <!-- Content Detail Modal -->
  <div x-show="showDetail" x-cloak 
       class="fixed inset-0 z-50 flex flex-col"
       @click.self="closeContentDetail()">
    <div class="relative w-full h-full overflow-y-auto bg-[--bg-primary]"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-300"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0">
         
      <div x-show="currentContent" class="relative">
        <!-- Back button -->
        <button @click="closeContentDetail()" 
                class="absolute top-4 left-4 z-10 bg-black/50 text-white p-2 rounded-full hover:bg-black/80 transition">
          <i class="fas fa-arrow-left"></i>
        </button>
        
        <!-- Hero banner image -->
        <div class="relative h-[60vh] md:h-[70vh] w-full bg-cover bg-center"
             :style="`background-image: url('${currentContent?.bannerImage}')`">
          <div class="banner-overlay absolute inset-0"></div>
          <div class="absolute bottom-0 left-0 p-6 md:p-10 w-full">
            <h1 class="text-3xl md:text-5xl font-bold mb-2 text-white" x-text="currentContent?.title"></h1>
            <div class="flex items-center mb-4">
              <span class="bg-[--accent-color] text-white px-2 py-0.5 rounded text-sm mr-3">
                <i class="fas fa-star mr-1"></i>
                <span x-text="currentContent?.rating"></span>/10
              </span>
              <span class="text-white/90 text-sm mr-3" x-text="currentContent?.year"></span>
              <span class="text-white/90 text-sm" x-text="currentContent?.duration"></span>
            </div>
            <p class="text-white/90 max-w-2xl mb-6" x-text="currentContent?.description"></p>
            <button
              @click="playCurrent()"
              class="bg-[--accent-color] hover:opacity-90 transition text-white py-3 px-8 rounded-lg font-medium flex items-center">
              <i class="fas fa-play mr-2"></i> Reproducir
            </button>
          </div>
        </div>
        
        <!-- Episodes section (for series) -->
        <div x-show="currentContent?.seasons?.length" class="p-6 md:p-10">
          <h2 class="text-2xl font-bold mb-6">Episodios</h2>
          
          <!-- Season selector -->
          <div class="mb-6">
            <select
              x-model.number="currentSeasonIndex"
              class="bg-[--bg-secondary] text-[--text-primary] py-2 px-4 rounded-lg border border-[--accent-color]/30 focus:border-[--accent-color] outline-none">
              <template x-for="(s, si) in currentContent.seasons" :key="si">
                <option :value="si" x-text="s.name"></option>
              </template>
            </select>
          </div>
          
          <!-- Episodes list -->
          <div class="grid gap-4">
            <template x-for="(ep, i) in currentContent.seasons[currentSeasonIndex]?.episodes" :key="i">
              <div class="flex items-center bg-[--bg-secondary] rounded-lg overflow-hidden hover:scale-[1.01] transition">
                <div class="w-36 h-20 bg-cover bg-center" 
                     :style="`background-image: url('${currentContent?.thumbnail}')`"></div>
                <div class="p-4 flex-1">
                  <h3 class="font-medium" x-text="`Episodio ${ep.number}: ${ep.title}`"></h3>
                  <p class="text-sm text-[--text-secondary]" x-text="ep.length"></p>
                </div>
                <div class="pr-4">
                  <button class="text-[--accent-color] hover:text-[--text-primary] p-2" @click="openPlayer(ep)">
                    <i class="fas fa-play"></i>
                  </button>
                </div>
              </div>
            </template>
          </div>
        </div>
        
        <!-- Additional info -->
        <div class="p-6 md:p-10">
          <h2 class="text-2xl font-bold mb-6">Información</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <h3 class="text-[--text-secondary] mb-2">Géneros</h3>
              <p x-text="currentContent?.genres?.join(', ')"></p>
            </div>
            <div>
              <h3 class="text-[--text-secondary] mb-2">Estudio</h3>
              <p x-text="currentContent?.studio"></p>
            </div>
            <div>
              <h3 class="text-[--text-secondary] mb-2">Director</h3>
              <p x-text="currentContent?.director"></p>
            </div>
            <div>
              <h3 class="text-[--text-secondary] mb-2">Idiomas</h3>
              <p>Japonés, Español Latino, Español (España), Inglés</p>
            </div>
          </div>
        </div>
        
        <!-- Recommendations -->
        <div class="p-6 md:p-10">
          <h2 class="text-2xl font-bold mb-6">Recomendaciones</h2>
          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
            <template x-for="i in 5" :key="i">
              <div class="anime-card rounded-lg overflow-hidden cursor-pointer">
                <div class="aspect-[2/3] bg-cover bg-center" 
                     style="background-image: url('https://cdn.pixabay.com/photo/2023/05/19/17/01/anime-8005750_960_720.jpg')"></div>
                <div class="p-2">
                  <p class="font-medium truncate">Anime recomendado</p>
                </div>
              </div>
            </template>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Player Modal (Bingezove) -->
  <div x-show="showPlayer" x-cloak class="fixed inset-0 z-[60] bg-black/80 flex items-center justify-center p-4" @click.self="closePlayer()">
    <div class="w-full max-w-5xl bg-[--bg-secondary] rounded-xl overflow-hidden shadow-2xl relative">
      <button @click="closePlayer()" class="absolute top-3 right-3 bg-black/50 text-white p-2 rounded-full hover:bg-black/80">
        <i class="fas fa-times"></i>
      </button>
      <div class="w-full aspect-video">
        <iframe :src="playerSrc" class="w-full h-full" frameborder="0" allowfullscreen></iframe>
      </div>
    </div>
  </div>

  <!-- Header/Navigation -->
  <header class="fixed top-0 left-0 right-0 z-40 bg-[--bg-primary] shadow-md">
    <div class="container mx-auto px-4 py-3">
      <div class="flex items-center justify-between">
        <!-- Logo -->
        <div class="flex items-center">
          <a href="javascript:void(0)" @click="currentView = 'home'" class="text-2xl font-bold text-[--accent-color]">
            Anime<span class="text-red-500">FC</span>
          </a>
        </div>
        
        <!-- Desktop Navigation -->
        <nav class="hidden md:flex items-center space-x-6">
          <a href="javascript:void(0)" @click="currentView = 'home'" class="font-medium hover:text-[--accent-color] transition"
             :class="currentView === 'home' ? 'text-[--accent-color]' : ''">
            Inicio
          </a>
          <a href="javascript:void(0)" @click="currentView = 'movies'" class="font-medium hover:text-[--accent-color] transition"
             :class="currentView === 'movies' ? 'text-[--accent-color]' : ''">
            Películas
          </a>
          <a href="javascript:void(0)" @click="currentView = 'series'" class="font-medium hover:text-[--accent-color] transition"
             :class="currentView === 'series' ? 'text-[--accent-color]' : ''">
            Series
          </a>
          <div class="relative">
            <input 
              type="text" 
              placeholder="Buscar animes..." 
              class="py-2 px-4 pr-10 bg-[--bg-secondary] rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-[--accent-color]"
              x-model="searchQuery"
            >
            <i class="fas fa-search absolute right-3 top-2.5 text-[--text-secondary]"></i>
          </div>
        </nav>
        
        <!-- Auth buttons / User menu -->
        <div class="flex items-center space-x-4">
          <!-- Theme toggle -->
          <button @click="toggleDarkMode()" class="p-2 rounded-full hover:bg-[--bg-secondary]">
            <i :class="darkMode ? 'fas fa-sun' : 'fas fa-moon'"></i>
          </button>
          
          <template x-if="!isLoggedIn">
            <button @click="showLogin = true" class="hidden sm:flex items-center px-4 py-2 bg-[--accent-color] hover:opacity-90 transition text-white rounded-lg">
              <i class="fas fa-sign-in-alt mr-2"></i> Iniciar Sesión
            </button>
          </template>
          
          <template x-if="isLoggedIn">
            <div class="relative" x-data="{ showUserMenu: false }">
              <button @click="showUserMenu = !showUserMenu" class="flex items-center focus:outline-none">
                <img :src="currentUser?.avatar" alt="Avatar" class="w-9 h-9 rounded-full object-cover">
                <span class="hidden sm:block ml-2" x-text="currentUser?.name"></span>
                <i class="fas fa-chevron-down ml-2 text-xs"></i>
              </button>
              
              <div x-show="showUserMenu" @click.away="showUserMenu = false" 
                   class="absolute right-0 mt-2 w-48 bg-[--bg-secondary] rounded-lg shadow-lg py-2 z-50"
                   x-transition:enter="transition ease-out duration-200"
                   x-transition:enter-start="opacity-0 transform scale-95"
                   x-transition:enter-end="opacity-100 transform scale-100"
                   x-transition:leave="transition ease-in duration-150"
                   x-transition:leave-start="opacity-100 transform scale-100"
                   x-transition:leave-end="opacity-0 transform scale-95">
                <div class="px-4 py-2 border-b border-[--text-secondary]/10">
                  <p class="font-medium" x-text="currentUser?.name"></p>
                  <p class="text-sm text-[--text-secondary]" x-text="currentUser?.email"></p>
                </div>
                <a href="javascript:void(0)" @click="currentView = 'profile'; showUserMenu = false" class="block px-4 py-2 hover:bg-[--accent-color]/10">
                  <i class="fas fa-user mr-2"></i> Mi Perfil
                </a>
                <a href="javascript:void(0)" @click="currentView = 'watchlist'; showUserMenu = false" class="block px-4 py-2 hover:bg-[--accent-color]/10">
                  <i class="fas fa-bookmark mr-2"></i> Mi Lista
                </a>
                <a href="javascript:void(0)" @click="logout()" class="block px-4 py-2 text-red-500 hover:bg-red-500/10">
                  <i class="fas fa-sign-out-alt mr-2"></i> Cerrar Sesión
                </a>
              </div>
            </div>
          </template>
          
          <!-- Mobile menu buttons -->
          <button @click="showMobileSearch = !showMobileSearch" class="md:hidden p-2">
            <i class="fas fa-search"></i>
          </button>
          <button class="md:hidden p-2">
            <i class="fas fa-bars"></i>
          </button>
        </div>
      </div>
      
      <!-- Mobile search bar -->
      <div x-show="showMobileSearch" x-transition class="pt-3 pb-2 md:hidden">
        <div class="relative">
          <input 
            type="text" 
            placeholder="Buscar animes..." 
            class="w-full py-2 px-4 pr-10 bg-[--bg-secondary] rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-[--accent-color]"
            x-model="searchQuery"
          >
          <i class="fas fa-search absolute right-3 top-2.5 text-[--text-secondary]"></i>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="pt-16 pb-16">
    <!-- Home View -->
    <div x-show="currentView === 'home'">
      <!-- Hero Banner -->
      <div class="relative h-[60vh] md:h-[80vh] bg-cover bg-center" 
           style="background-image: url('https://cdn.pixabay.com/photo/2021/11/04/05/33/sakura-6767889_960_720.jpg')">
        <div class="banner-overlay absolute inset-0"></div>
        <div class="absolute bottom-0 left-0 p-6 md:p-10 w-full">
          <span class="inline-block bg-red-600 text-white px-2 py-0.5 rounded text-sm mb-4">DESTACADO</span>
          <h1 class="text-3xl md:text-5xl font-bold mb-2 text-white">Nuevo Anime Exclusivo</h1>
          <p class="text-white/90 max-w-2xl mb-6">Sumérgete en un mundo lleno de magia y aventura. Disponible ahora en estreno exclusivo solo para miembros premium.</p>
          <div class="flex flex-wrap gap-3">
            <button @click="showContentDetail(sampleFeatured)"
              class="bg-[--accent-color] hover:opacity-90 transition text-white py-3 px-8 rounded-lg font-medium flex items-center">
              <i class="fas fa-play mr-2"></i> Reproducir
            </button>
            <button class="bg-white/20 backdrop-blur-sm hover:bg-white/30 transition text-white py-3 px-8 rounded-lg font-medium flex items-center">
              <i class="fas fa-info-circle mr-2"></i> Más Info
            </button>
          </div>
        </div>
      </div>
      
      <!-- Trending Now Section -->
      <section class="py-8 px-6">
        <h2 class="text-2xl font-bold mb-6">Tendencias</h2>
        <div class="carousel flex gap-4 overflow-x-auto pb-4">
          <template x-for="item in filtered(trendingList)" :key="item.title">
            <div @click="showContentDetail(item)" class="anime-card flex-shrink-0 w-[280px] rounded-lg overflow-hidden cursor-pointer">
              <div class="relative aspect-video bg-cover bg-center" 
                   :style="`background-image: url('${item.thumbnail}')`">
                <div class="absolute bottom-2 left-2 bg-black/70 px-2 py-1 rounded text-white text-xs">
                  <i class="fas fa-star text-yellow-500 mr-1"></i>
                  <span x-text="item.rating"></span>
                </div>
                <div class="absolute top-2 right-2">
                  <div class="relative inline-block w-10 align-middle select-none">
                    <input type="checkbox" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer right-5 top-0" />
                    <label class="toggle-label block overflow-hidden h-5 rounded-full bg-gray-300 cursor-pointer"></label>
                  </div>
                </div>
              </div>
              <div class="p-3">
                <h3 class="font-medium truncate" x-text="item.title"></h3>
                <p class="text-sm text-[--text-secondary]" x-text="item.type === 'movie' ? 'Película' : `${item.seasons.length} temporadas`"></p>
              </div>
            </div>
          </template>
        </div>
      </section>
      
      <!-- Categories Section -->
      <section class="py-4 px-6">
        <div class="flex flex-wrap gap-2 mb-6">
          <button class="bg-[--accent-color] text-white px-4 py-1 rounded-full text-sm">Todos</button>
          <button class="bg-[--bg-secondary] hover:bg-[--accent-color] hover:text-white transition px-4 py-1 rounded-full text-sm">Acción</button>
          <button class="bg-[--bg-secondary] hover:bg-[--accent-color] hover:text-white transition px-4 py-1 rounded-full text-sm">Romance</button>
          <button class="bg-[--bg-secondary] hover:bg-[--accent-color] hover:text-white transition px-4 py-1 rounded-full text-sm">Fantasía</button>
          <button class="bg-[--bg-secondary] hover:bg-[--accent-color] hover:text-white transition px-4 py-1 rounded-full text-sm">Comedia</button>
          <button class="bg-[--bg-secondary] hover:bg-[--accent-color] hover:text-white transition px-4 py-1 rounded-full text-sm">Terror</button>
          <button class="bg-[--bg-secondary] hover:bg-[--accent-color] hover:text-white transition px-4 py-1 rounded-full text-sm">Ciencia Ficción</button>
        </div>
      </section>
      
      <!-- Popular Series Section -->
      <section class="py-4 px-6">
        <h2 class="text-2xl font-bold mb-6">Series Populares</h2>
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
          <template x-for="item in filtered(popularSeries)" :key="item.title">
            <div @click="showContentDetail(item)" class="anime-card rounded-lg overflow-hidden cursor-pointer">
              <div class="relative aspect-[2/3] bg-cover bg-center" 
                   :style="`background-image: url('${item.bannerImage}')`">
                <div class="absolute bottom-2 left-2 bg-black/70 px-2 py-1 rounded text-white text-xs">
                  <i class="fas fa-star text-yellow-500 mr-1"></i>
                  <span x-text="item.rating"></span>
                </div>
                <div class="absolute top-2 right-2">
                  <div class="relative inline-block w-10 align-middle select-none">
                    <input type="checkbox" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer right-5 top-0" />
                    <label class="toggle-label block overflow-hidden h-5 rounded-full bg-gray-300 cursor-pointer"></label>
                  </div>
                </div>
              </div>
              <div class="p-2">
                <h3 class="font-medium truncate" x-text="item.title"></h3>
                <p class="text-sm text-[--text-secondary]" x-text="item.year"></p>
              </div>
            </div>
          </template>
        </div>
      </section>
      
      <!-- Featured Movies -->
      <section class="py-8 px-6">
        <h2 class="text-2xl font-bold mb-6">Películas Destacadas</h2>
        <div class="carousel flex gap-4 overflow-x-auto pb-4">
          <template x-for="item in filtered(featuredMovies)" :key="item.title">
            <div @click="showContentDetail(item)" class="anime-card flex-shrink-0 w-[200px] rounded-lg overflow-hidden cursor-pointer">
              <div class="relative aspect-[2/3] bg-cover bg-center" 
                   :style="`background-image: url('${item.bannerImage}')`">
                <div class="absolute bottom-2 left-2 bg-black/70 px-2 py-1 rounded text-white text-xs">
                  <i class="fas fa-star text-yellow-500 mr-1"></i>
                  <span x-text="item.rating"></span>
                </div>
                <div class="absolute top-2 right-2">
                  <div class="relative inline-block w-10 align-middle select-none">
                    <input type="checkbox" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer right-5 top-0" />
                    <label class="toggle-label block overflow-hidden h-5 rounded-full bg-gray-300 cursor-pointer"></label>
                  </div>
                </div>
              </div>
              <div class="p-2">
                <h3 class="font-medium truncate" x-text="item.title"></h3>
                <p class="text-sm text-[--text-secondary]" x-text="item.year"></p>
              </div>
            </div>
          </template>
        </div>
      </section>
      
      <!-- Recently Added -->
      <section class="py-4 px-6">
        <h2 class="text-2xl font-bold mb-6">Recién Agregados</h2>
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
          <template x-for="item in filtered(recentAdded)" :key="item.title">
            <div @click="showContentDetail(item)" class="anime-card rounded-lg overflow-hidden cursor-pointer">
              <div class="relative aspect-[2/3] bg-cover bg-center" 
                   :style="`background-image: url('${item.bannerImage}')`">
                <div class="absolute bottom-2 left-2 bg-black/70 px-2 py-1 rounded text-white text-xs">
                  <i class="fas fa-star text-yellow-500 mr-1"></i>
                  <span x-text="item.rating"></span>
                </div>
                <div class="absolute top-2 right-2">
                  <div class="relative inline-block w-10 align-middle select-none">
                    <input type="checkbox" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer right-5 top-0" />
                    <label class="toggle-label block overflow-hidden h-5 rounded-full bg-gray-300 cursor-pointer"></label>
                  </div>
                </div>
              </div>
              <div class="p-2">
                <h3 class="font-medium truncate" x-text="item.title"></h3>
                <p class="text-sm text-[--text-secondary]" x-text="item.type === 'movie' ? 'Película' : 'Serie'"></p>
              </div>
            </div>
          </template>
        </div>
      </section>
    </div>
    
    <!-- Profile View -->
    <div x-show="currentView === 'profile'" class="container mx-auto px-6 pt-8">
      <h1 class="text-3xl font-bold mb-8">Mi Perfil</h1>
      <div class="bg-[--bg-secondary] rounded-xl p-6 mb-8">
        <div class="flex flex-col md:flex-row md:items-center">
          <img :src="currentUser?.avatar" alt="Avatar" class="w-24 h-24 rounded-full object-cover mb-4 md:mb-0 md:mr-6">
          <div>
            <h2 class="text-2xl font-bold" x-text="currentUser?.name"></h2>
            <p class="text-[--text-secondary]" x-text="currentUser?.email"></p>
            <div class="mt-2">
              <span class="inline-block bg-[--accent-color] text-white px-3 py-1 rounded-full text-sm">
                <i class="fas fa-crown mr-1"></i>
                <span x-text="currentUser?.subscription"></span>
              </span>
            </div>
          </div>
        </div>
      </div>
      <!-- ... (resto de tu vista de perfil original sin cambios) ... -->
    </div>
    
    <!-- Watchlist View -->
    <div x-show="currentView === 'watchlist'" class="container mx-auto px-6 pt-8">
      <h1 class="text-3xl font-bold mb-8">Mi Lista</h1>
      <!-- ... (se mantiene tu vista de watchlist original) ... -->
    </div>
    
    <!-- Movies View -->
    <div x-show="currentView === 'movies'" class="container mx-auto px-6 pt-8">
      <h1 class="text-3xl font-bold mb-6">Películas</h1>
      <!-- (Puedes dejar esta vista como estaba o enlazarla a featuredMovies si quieres) -->
      <div class="flex flex-wrap gap-2 mb-6">
        <button class="bg-[--accent-color] text-white px-4 py-1 rounded-full text-sm">Todos</button>
        <button class="bg-[--bg-secondary] hover:bg-[--accent-color] hover:text-white transition px-4 py-1 rounded-full text-sm">Acción</button>
        <button class="bg-[--bg-secondary] hover:bg-[--accent-color] hover:text-white transition px-4 py-1 rounded-full text-sm">Romance</button>
        <button class="bg-[--bg-secondary] hover:bg-[--accent-color] hover:text-white transition px-4 py-1 rounded-full text-sm">Fantasía</button>
        <button class="bg-[--bg-secondary] hover:bg-[--accent-color] hover:text-white transition px-4 py-1 rounded-full text-sm">Comedia</button>
      </div>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
        <template x-for="item in filtered(featuredMovies)" :key="item.title">
          <div @click="showContentDetail(item)" class="anime-card rounded-lg overflow-hidden cursor-pointer">
            <div class="relative aspect-[2/3] bg-cover bg-center" 
                 :style="`background-image: url('${item.bannerImage}')`">
              <div class="absolute bottom-2 left-2 bg-black/70 px-2 py-1 rounded text-white text-xs">
                <i class="fas fa-star text-yellow-500 mr-1"></i>
                <span x-text="item.rating"></span>
              </div>
              <div class="absolute top-2 right-2">
                <div class="relative inline-block w-10 align-middle select-none">
                  <input type="checkbox" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer right-5 top-0" />
                  <label class="toggle-label block overflow-hidden h-5 rounded-full bg-gray-300 cursor-pointer"></label>
                </div>
              </div>
            </div>
            <div class="p-2">
              <h3 class="font-medium truncate" x-text="item.title"></h3>
              <p class="text-sm text-[--text-secondary]" x-text="item.year"></p>
            </div>
          </div>
        </template>
      </div>
    </div>
  </main>

  <script>
    function app(){
      const EMBED_URL = '';

      // Utilidades para generar temporadas/episodios de ejemplo
      const genEpisodes = (count) =>
        Array.from({length: count}, (_, i) => ({
          number: i + 1,
          title: 'Título del episodio ' + (i + 1),
          length: '24 min',
          embedUrl: EMBED_URL
        }));
      const genSeasons = (nSeasons = 2, eps = 12) =>
        Array.from({length: nSeasons}, (_, s) => ({
          name: 'Temporada ' + (s + 1),
          episodes: genEpisodes(eps)
        }));
      const movieSeason = (title = 'Película', length = '120 min') => ({
        name: 'Película',
        episodes: [{ number: 1, title, length, embedUrl: EMBED_URL }]
      });

// 🎴 Imágenes individuales para cada anime


    const imgOnePiece     = "https://m.media-amazon.com/images/S/pv-target-images/5c57390c319ef27a7ecb1336ce2fa8d70dc93f814e95530e9302d696ea50c6c8.jpg";
    const imgAOT          = "https://m.media-amazon.com/images/M/MV5BN2EzYTYyNGUtOTE2ZS00ZTljLWE5M2EtZDViYjhmYzgwNThhXkEyXkFqcGc@._V1_.jpg";
    const imgAOT1         = "https://img.asmedia.epimg.net/resizer/v2/K7ZGKKC34NFB5L6QGU3NGIJJTY.jpg?auth=89c60d6947dc848c626183f6c5c56bd6c155b77a1968e9941ece745e028b1dab&width=644&height=362&smart=true"
    const imgDemon        = "https://demonslayer-hinokami.sega.com/img/purchase/digital-deluxe-es.jpg";
    const img             = "https://www.lavanguardia.com/peliculas-series/images/movie/poster/1991/3/w1280/iCySGAWNMk0BETBGAK3xNOKTkX5.jpg";
    const imgFMA          = "https://cdn.pixabay.com/photo/2021/01/30/12/20/anime-5966735_960_720.jpg";
    const imgDeathNote    = "https://cdn.pixabay.com/photo/2017/08/30/02/14/death-note-2698983_960_720.jpg";
    const imgHaikyuu      = "https://cdn.pixabay.com/photo/2020/05/16/14/51/anime-5172780_960_720.jpg";
    const imgTokyoGhoul   = "https://cdn.pixabay.com/photo/2022/03/01/08/53/anime-7041235_960_720.jpg";
    const imgSAO          = "https://cdn.pixabay.com/photo/2019/08/01/04/25/anime-4377154_960_720.jpg";
    const imgBlackClover  = "https://cdn.pixabay.com/photo/2021/12/13/11/55/anime-6866468_960_720.jpg";
    const imgFairyTail    = "https://cdn.pixabay.com/photo/2019/08/14/06/25/fairy-tail-4405217_960_720.jpg";
    const imgBlueLock     = "https://cdn.pixabay.com/photo/2022/12/05/06/59/anime-7635727_960_720.jpg";
    const imgSpyFamily    = "https://cdn.pixabay.com/photo/2022/11/29/23/18/anime-7625801_960_720.jpg";
    const imgVinland      = "https://cdn.pixabay.com/photo/2018/03/22/17/57/anime-3250805_960_720.jpg";



      const trendingList = [

        { title:'One Piece',          
        type:'serie', 
        rating:'9.2', 
        year:'1999', 
        duration:'24 min/ep', 
        bannerImage: imgOnePiece, 
        thumbnail: imgOnePiece, 
        genres:['Acción','Aventura'], 
        studio:'Toei Animation', 
        director:'Konosuke Uda', 
        seasons: [
      {
        name: "Temporada 1",
        episodes: [
          { number: 1 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/hn1g7a7ly4hq" },
          { number: 2 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 3 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 4 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 5 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 6 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 7 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 8 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 9 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:10 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:11 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:12 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
        ]
      },
      {
        name: "Temporada 2",
        episodes: [
          { number: 1 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 2 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 3 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 4 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 5 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 6 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 7 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 8 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 9 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:10 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:11 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:12 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
        ]
      }
    ]
  },
        
        { title:'Attack on Titan',    
        type:'serie', 
        rating:'9.3', 
        year:'2013', 
        duration:'24 min/ep', 
        bannerImage: imgAOT1, 
        thumbnail: imgAOT, 
        genres:['Acción','Drama'], 
        studio:'MAPPA', 
        director:'Yuichiro Hayashi', 
        seasons: [
      {
        name: "Temporada 1",
        episodes: [
          { number: 1 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 2 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 3 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 4 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 5 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 6 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 7 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 8 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 9 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:10 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:11 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:12 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
        ]
      },
      {
        name: "Temporada 2",
        episodes: [
          { number: 1 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 2 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 3 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 4 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 5 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 6 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 7 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 8 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 9 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:10 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:11 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:12 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
        ]
      }
    ]
  },
        
        
        { title:'Demon Slayer',       
        type:'serie', 
        rating:'8.9', 
        year:'2019', 
        duration:'24 min/ep', 
        bannerImage: imgDemon, 
        thumbnail: imgDemon, 
        genres:['Acción','Fantasía'], 
        studio:'ufotable', 
        director:'Haruo Sotozaki', 
        seasons: [
      {
        name: "Temporada 1",
        episodes: [
          { number: 1 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 2 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 3 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 4 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 5 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 6 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 7 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 8 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 9 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:10 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:11 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:12 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
        ]
      },
      {
        name: "Temporada 2",
        episodes: [
          { number: 1 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 2 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 3 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 4 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 5 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 6 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 7 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 8 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 9 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:10 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:11 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:12 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
        ]
      }
    ]
  },


  { title:'Dragon Ball Z',      
  type:'serie', 
  rating:'8.7', 
  year:'1989', 
  duration:'24 min/ep', 
  bannerImage: img, 
  thumbnail: img, 
  genres:['Acción','Artes Marciales'], 
  studio:'Toei', 
  director:'Daisuke Nishio', 
  seasons: [
      {
        name: "Temporada 1",
        episodes: [
          { number: 1 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 2 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 3 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 4 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 5 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 6 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 7 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 8 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 9 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:10 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:11 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:12 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
        ]
      },
      {
        name: "Temporada 2",
        episodes: [
          { number: 1 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 2 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 3 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 4 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 5 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 6 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 7 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 8 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 9 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:10 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:11 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:12 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
        ]
      }
    ]
  },
  
];

      const popularSeries = [
        { title:'Fullmetal Alchemist: Brotherhood', 
        type:'serie', 
        rating:'9.1', 
        year:'2009', 
        duration:'24 min/ep', 
        bannerImage: 'https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.reddit.com%2Fr%2FNaruto%2Fcomments%2F1ayfdgl%2Fitachi_uchiha%2F%3Ftl%3Des-419&psig=AOvVaw3S5nPujFakEoT2hUkFHo5X&ust=1757383964971000&source=images&cd=vfe&opi=89978449&ved=0CBUQjRxqFwoTCOD_7suLyI8DFQAAAAAdAAAAABAE', 
        thumbnail: img, 
        genres:['Acción','Aventura'], 
        studio:'Bones', 
        director:'Yasuhiro Irie', 
        seasons: [
      {
        name: "Temporada 1",
        episodes: [
          { number: 1 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/xwfzdhazdogg" },
          { number: 2 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 3 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 4 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 5 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 6 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 7 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 8 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 9 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:10 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:11 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:12 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
        ]
      },
      {
        name: "Temporada 2",
        episodes: [
          { number: 1 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/hn1g7a7ly4hq" },
          { number: 2 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 3 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 4 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 5 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 6 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 7 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 8 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number: 9 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:10 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:11 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
          { number:12 , title: "Episodio  ", length: "24 min", embedUrl: "https://bingezove.com/embed/" },
        ]
      }
    ]
  },

        { title:'Death Note',                         type:'serie', rating:'9.0', year:'2006', duration:'24 min/ep', bannerImage: 'https://cdn.pixabay.com/photo/2022/06/21/21/15/anime-7276634_960_720.jpg', thumbnail: img, genres:['Suspenso','Psicológico'], studio:'Madhouse', director:'Tetsuro Araki', seasons: genSeasons(2,12) },
        { title:'Haikyuu!!',                          type:'serie', rating:'8.8', year:'2014', duration:'24 min/ep', bannerImage: 'https://cdn.pixabay.com/photo/2022/06/21/21/15/anime-7276634_960_720.jpg', thumbnail: img, genres:['Deportes'], studio:'Production I.G', director:'Susumu Mitsunaka', seasons: genSeasons(2,12) },
        { title:'Tokyo Ghoul',                        type:'serie', rating:'7.8', year:'2014', duration:'24 min/ep', bannerImage: 'https://cdn.pixabay.com/photo/2022/06/21/21/15/anime-7276634_960_720.jpg', thumbnail: img, genres:['Acción','Horror'], studio:'Pierrot', director:'Shuhei Morita', seasons: genSeasons(2,12) },
        { title:'Sword Art Online',                   type:'serie', rating:'7.7', year:'2012', duration:'24 min/ep', bannerImage: 'https://cdn.pixabay.com/photo/2022/06/21/21/15/anime-7276634_960_720.jpg', thumbnail: img, genres:['Acción','Sci-Fi'], studio:'A-1 Pictures', director:'Tomohiko Ito', seasons: genSeasons(2,12) },
        { title:'Black Clover',                       type:'serie', rating:'8.1', year:'2017', duration:'24 min/ep', bannerImage: 'https://cdn.pixabay.com/photo/2022/06/21/21/15/anime-7276634_960_720.jpg', thumbnail: img, genres:['Acción','Fantasía'], studio:'Pierrot', director:'Tatsuya Yoshihara', seasons: genSeasons(2,12) },
        { title:'Fairy Tail',                         type:'serie', rating:'7.9', year:'2009', duration:'24 min/ep', bannerImage: 'https://cdn.pixabay.com/photo/2022/06/21/21/15/anime-7276634_960_720.jpg', thumbnail: img, genres:['Aventura','Fantasía'], studio:'A-1 Pictures', director:'Shinji Ishihara', seasons: genSeasons(2,12) },
        { title:'Blue Lock',                          type:'serie', rating:'8.3', year:'2022', duration:'24 min/ep', bannerImage: 'https://cdn.pixabay.com/photo/2022/06/21/21/15/anime-7276634_960_720.jpg', thumbnail: img, genres:['Deportes'], studio:'8bit', director:'Tetsuaki Watanabe', seasons: genSeasons(2,12) },
        { title:'Spy x Family',                       type:'serie', rating:'8.6', year:'2022', duration:'24 min/ep', bannerImage: 'https://cdn.pixabay.com/photo/2022/06/21/21/15/anime-7276634_960_720.jpg', thumbnail: img, genres:['Comedia','Acción'], studio:'CloverWorks/WIT', director:'Kazuhiro Furuhashi', seasons: genSeasons(2,12) },
        { title:'Vinland Saga',                       type:'serie', rating:'8.8', year:'2019', duration:'24 min/ep', bannerImage: 'https://cdn.pixabay.com/photo/2022/06/21/21/15/anime-7276634_960_720.jpg', thumbnail: img, genres:['Acción','Histórico'], studio:'WIT/MAPPA', director:'Shuhei Yabuta', seasons: genSeasons(2,12) }
      ];

      const featuredMovies = [
        { title:'Spirited Away',            type:'movie', rating:'9.0', year:'2001', duration:'125 min', bannerImage:'https://cdn.pixabay.com/photo/2019/11/29/14/29/anime-4661434_960_720.jpg', thumbnail: img, genres:['Fantasía'], studio:'Ghibli', director:'Hayao Miyazaki', seasons:[movieSeason('Spirited Away','125 min')] },
        { title:'Your Name',                type:'movie', rating:'8.9', year:'2016', duration:'106 min', bannerImage:'https://cdn.pixabay.com/photo/2019/11/29/14/29/anime-4661434_960_720.jpg', thumbnail: img, genres:['Romance','Fant'], studio:'CoMix Wave', director:'Makoto Shinkai', seasons:[movieSeason('Your Name','106 min')] },
        { title:'A Silent Voice',           type:'movie', rating:'8.6', year:'2016', duration:'130 min', bannerImage:'https://cdn.pixabay.com/photo/2019/11/29/14/29/anime-4661434_960_720.jpg', thumbnail: img, genres:['Drama'], studio:'Kyoto Animation', director:'Naoko Yamada', seasons:[movieSeason('A Silent Voice','130 min')] },
        { title:'Princess Mononoke',        type:'movie', rating:'8.7', year:'1997', duration:'134 min', bannerImage:'https://cdn.pixabay.com/photo/2019/11/29/14/29/anime-4661434_960_720.jpg', thumbnail: img, genres:['Fantasía'], studio:'Ghibli', director:'Hayao Miyazaki', seasons:[movieSeason('Princess Mononoke','134 min')] },
        { title:'Weathering With You',      type:'movie', rating:'8.2', year:'2019', duration:'112 min', bannerImage:'https://cdn.pixabay.com/photo/2019/11/29/14/29/anime-4661434_960_720.jpg', thumbnail: img, genres:['Romance','Fant'], studio:'CoMix Wave', director:'Makoto Shinkai', seasons:[movieSeason('Weathering With You','112 min')] },
        { title:'The Wind Rises',           type:'movie', rating:'7.8', year:'2013', duration:'126 min', bannerImage:'https://cdn.pixabay.com/photo/2019/11/29/14/29/anime-4661434_960_720.jpg', thumbnail: img, genres:['Histórico','Drama'], studio:'Ghibli', director:'Hayao Miyazaki', seasons:[movieSeason('The Wind Rises','126 min')] },
        { title:'Demon Slayer: Mugen Train',type:'movie', rating:'8.2', year:'2020', duration:'117 min', bannerImage:'https://cdn.pixabay.com/photo/2019/11/29/14/29/anime-4661434_960_720.jpg', thumbnail: img, genres:['Acción'], studio:'ufotable', director:'Haruo Sotozaki', seasons:[movieSeason('Mugen Train','117 min')] },
        { title:'Dragon Ball Super: Broly', type:'movie', rating:'7.8', year:'2018', duration:'101 min', bannerImage:'https://cdn.pixabay.com/photo/2019/11/29/14/29/anime-4661434_960_720.jpg', thumbnail: img, genres:['Acción'], studio:'Toei', director:'Tatsuya Nagamine', seasons:[movieSeason('Broly','101 min')] },
        { title:'One Piece Film: Red',      type:'movie', rating:'7.1', year:'2022', duration:'115 min', bannerImage:'https://cdn.pixabay.com/photo/2019/11/29/14/29/anime-4661434_960_720.jpg', thumbnail: img, genres:['Aventura'], studio:'Toei', director:'Goro Taniguchi', seasons:[movieSeason('Film: Red','115 min')] },
        { title:'The Boy and the Heron',    type:'movie', rating:'8.1', year:'2023', duration:'124 min', bannerImage:'https://cdn.pixabay.com/photo/2019/11/29/14/29/anime-4661434_960_720.jpg', thumbnail: img, genres:['Fantasía'], studio:'Ghibli', director:'Hayao Miyazaki', seasons:[movieSeason('The Boy and the Heron','124 min')] }
      ];

      const recentAdded = [
        { title:'Oshi no Ko', type:'serie', rating:'8.6', year:'2023', duration:'24 min/ep', bannerImage:'https://cdn.pixabay.com/photo/2023/01/26/22/12/ai-generated-7747390_960_720.jpg', thumbnail: img, genres:['Drama','Música'], studio:'Doga Kobo', director:'Daisuke Hiramaki', seasons: genSeasons(1,11) },
        { title:'Blue Exorcist', type:'serie', rating:'7.5', year:'2011', duration:'24 min/ep', bannerImage:'https://cdn.pixabay.com/photo/2023/01/26/22/12/ai-generated-7747390_960_720.jpg', thumbnail: img, genres:['Acción','Sobrenatural'], studio:'A-1 Pictures', director:'Atsushi Takahashi', seasons: genSeasons(2,12) },
        { title:'Made in Abyss', type:'serie', rating:'8.7', year:'2017', duration:'24 min/ep', bannerImage:'https://cdn.pixabay.com/photo/2023/01/26/22/12/ai-generated-7747390_960_720.jpg', thumbnail: img, genres:['Aventura','Fantasía'], studio:'Kinema Citrus', director:'Masayuki Kojima', seasons: genSeasons(2,12) },
        { title:'Psycho-Pass', type:'serie', rating:'8.2', year:'2012', duration:'24 min/ep', bannerImage:'https://cdn.pixabay.com/photo/2023/01/26/22/12/ai-generated-7747390_960_720.jpg', thumbnail: img, genres:['Sci-Fi','Policial'], studio:'Production I.G', director:'Naoyoshi Shiotani', seasons: genSeasons(2,12) },
        { title:'Kaguya-sama', type:'serie', rating:'8.7', year:'2019', duration:'24 min/ep', bannerImage:'https://cdn.pixabay.com/photo/2023/01/26/22/12/ai-generated-7747390_960_720.jpg', thumbnail: img, genres:['Comedia','Romance'], studio:'A-1 Pictures', director:'Shinichi Omata', seasons: genSeasons(2,12) },
        { title:'Suzume', type:'movie', rating:'7.8', year:'2022', duration:'122 min', bannerImage:'https://cdn.pixabay.com/photo/2023/01/26/22/12/ai-generated-7747390_960_720.jpg', thumbnail: img, genres:['Aventura','Fant'], studio:'CoMix Wave', director:'Makoto Shinkai', seasons:[movieSeason('Suzume','122 min')] },
        { title:'Belle', type:'movie', rating:'7.2', year:'2021', duration:'121 min', bannerImage:'https://cdn.pixabay.com/photo/2023/01/26/22/12/ai-generated-7747390_960_720.jpg', thumbnail: img, genres:['Música','Drama'], studio:'Studio Chizu', director:'Mamoru Hosoda', seasons:[movieSeason('Belle','121 min')] },
        { title:'Fate/Zero', type:'serie', rating:'8.2', year:'2011', duration:'24 min/ep', bannerImage:'https://cdn.pixabay.com/photo/2023/01/26/22/12/ai-generated-7747390_960_720.jpg', thumbnail: img, genres:['Acción','Fantasía'], studio:'ufotable', director:'Ei Aoki', seasons: genSeasons(2,12) },
        { title:'Overlord', type:'serie', rating:'7.7', year:'2015', duration:'24 min/ep', bannerImage:'https://cdn.pixabay.com/photo/2023/01/26/22/12/ai-generated-7747390_960_720.jpg', thumbnail: img, genres:['Isekai','Acción'], studio:'Madhouse', director:'Naoyuki Itou', seasons: genSeasons(2,12) },
        { title:'Noragami', type:'serie', rating:'7.9', year:'2014', duration:'24 min/ep', bannerImage:'https://cdn.pixabay.com/photo/2023/01/26/22/12/ai-generated-7747390_960_720.jpg', thumbnail: img, genres:['Acción','Sobrenatural'], studio:'Bones', director:'Kotaro Tamura', seasons: genSeasons(2,12) }
      ];

      // Ejemplo para el banner principal
      const sampleFeatured = {
        title: 'Nuevo Anime Exclusivo',
        type: 'serie',
        rating: '9.5',
        year: '2025',
        duration: '24 min/ep',
        description: 'Sumérgete en un mundo lleno de magia y aventura. Disponible ahora en estreno exclusivo solo para miembros premium.',
        bannerImage: 'https://cdn.pixabay.com/photo/2021/11/04/05/33/sakura-6767889_960_720.jpg',
        thumbnail: 'https://cdn.pixabay.com/photo/2023/05/19/17/01/anime-8005750_960_720.jpg',
        genres: ['Acción', 'Fantasía', 'Aventura'],
        studio: 'Studio Anime',
        director: 'Director Famoso',
        seasons: genSeasons(1, 8)
      };

      return {
        // Estado UI
        darkMode: true, 
        showLogin: false, 
        isLoggedIn: false,
        currentUser: null,
        showDetail: false,
        currentContent: null,
        currentSeasonIndex: 0,
        showPlayer: false,
        playerSrc: null,
        currentView: 'home',
        searchQuery: '',
        showMobileSearch: false,
        isLoading: true,

        // Datos
        trendingList,
        popularSeries,
        featuredMovies,
        recentAdded,
        sampleFeatured,

        // Métodos
        toggleDarkMode() {
          this.darkMode = !this.darkMode;
          localStorage.setItem('darkMode', this.darkMode);
          document.body.classList.toggle('dark', this.darkMode);
          document.body.classList.toggle('light', !this.darkMode);
        },
        checkLoginStatus() {
          const user = localStorage.getItem('user');
          if (user) {
            this.isLoggedIn = true;
            this.currentUser = JSON.parse(user);
          }
        },
        login(provider) {
          this.isLoggedIn = true;
          this.currentUser = {
            name: provider === 'google' ? 'Usuario de Google' : 'Usuario de Facebook',
            email: 'usuario@ejemplo.com',
            avatar: 'https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png',
            subscription: 'Premium'
          };
          localStorage.setItem('user', JSON.stringify(this.currentUser));
          this.showLogin = false;
        },
        logout() {
          this.isLoggedIn = false;
          this.currentUser = null;
          localStorage.removeItem('user');
          this.currentView = 'home';
        },
        showContentDetail(content) {
          this.currentContent = content;
          this.currentSeasonIndex = 0;
          this.showDetail = true;
        },
        closeContentDetail() {
          this.showDetail = false;
          this.currentContent = null;
        },
        openPlayer(ep) {
          // Siempre usa tu embed para cada episodio
          this.playerSrc = ep?.embedUrl || EMBED_URL;
          this.showPlayer = true;
        },
        playCurrent() {
          // Reproduce el primer episodio de la temporada seleccionada (o la película)
          const s = this.currentContent?.seasons?.[this.currentSeasonIndex];
          const ep = s?.episodes?.[0] || { embedUrl: EMBED_URL };
          this.openPlayer(ep);
        },
        closePlayer() {
          this.showPlayer = false;
          this.playerSrc = null;
        },
        filtered(list){
          // buscador simple por título
          const q = this.searchQuery.toLowerCase().trim();
          if(!q) return list;
          return list.filter(x => x.title.toLowerCase().includes(q));
        },
        init() {
          if (localStorage.getItem('darkMode') === 'false') {
            this.darkMode = false;
            document.body.classList.add('light');
          } else {
            this.darkMode = true;
            document.body.classList.add('dark');
          }
          this.checkLoginStatus();
          setTimeout(() => { this.isLoading = false; }, 800);
        }
      };
    }
  </script>
</body>
</html>

